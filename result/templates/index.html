<!DOCTYPE html>
<html>
<head>
    <title>Poll Results</title>
    <style>
        body { font-family: sans-serif; text-align: center; background-color: #f8f9fa; }
        h1 { color: #333; }
        #results-container { width: 80%; max-width: 600px; margin: 50px auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        .bar-container { margin: 20px 0; }
        .label { font-size: 20px; font-weight: bold; margin-bottom: 5px; }
        .bar { height: 40px; line-height: 40px; color: white; text-align: right; padding-right: 10px; border-radius: 5px; transition: width 0.5s; }
        .cats { background-color: #007BFF; }
        .dogs { background-color: #28a745; }
        .percent { font-weight: bold; }
    </style>
</head>
<body>
    <h1>Live Poll Results</h1>
    <div id="results-container">
        <div class="bar-container">
            <div class="label">üê± Cats: <span id="cats-count">0</span> votes</div>
            <div class="bar cats" id="cats-bar" style="width: 0%;">
                <span class="percent" id="cats-percent">0%</span>
            </div>
        </div>
        <div class="bar-container">
            <div class="label">üê∂ Dogs: <span id="dogs-count">0</span> votes</div>
            <div class="bar dogs" id="dogs-bar" style="width: 0%;">
                <span class="percent" id="dogs-percent">0%</span>
            </div>
        </div>
    </div>

    <script>
        function getResults() {
            fetch('/results')
                .then(response => response.json())
                .then(data => {
                    const catsVotes = data.cats || 0;
                    const dogsVotes = data.dogs || 0;
                    const totalVotes = catsVotes + dogsVotes;

                    const catsPercent = totalVotes === 0 ? 0 : (catsVotes / totalVotes) * 100;
                    const dogsPercent = totalVotes === 0 ? 0 : (dogsVotes / totalVotes) * 100;

                    document.getElementById('cats-count').textContent = catsVotes;
                    document.getElementById('dogs-count').textContent = dogsVotes;
                    
                    document.getElementById('cats-bar').style.width = catsPercent.toFixed(1) + '%';
                    document.getElementById('cats-percent').textContent = catsPercent.toFixed(1) + '%';
                    
                    document.getElementById('dogs-bar').style.width = dogsPercent.toFixed(1) + '%';
                    document.getElementById('dogs-percent').textContent = dogsPercent.toFixed(1) + '%';
                })
                .catch(error => console.error('Error fetching results:', error));
        }

        // Fetch results every 2 seconds
        setInterval(getResults, 2000);
        // Initial fetch
        getResults();
    </script>
</body>
</html>